<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover"/>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#0f172a">
<title>CyberOffz: Ultimate Trainer</title>

<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üõ°Ô∏è</text></svg>">
<link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 fill=%22%231e293b%22/><text x=%2250%25%22 y=%2250%25%22 dominant-baseline=%22central%22 text-anchor=%22middle%22 font-size=%2270%22>üõ°Ô∏è</text></svg>">

<style>
:root {
  --bg: #0f172a; --panel: #1e293b; --text: #f1f5f9; --muted: #94a3b8;
  --accent: #3b82f6; --success: #22c55e; --error: #ef4444; --border: rgba(255,255,255,0.1);
  --warning: #f59e0b;
}
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
body { margin:0; font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; background:var(--bg); color:var(--text); height:100vh; display:flex; flex-direction:column; overflow:hidden; }

/* UTILS */
.wrap { width:100%; max-width:850px; margin:0 auto; padding:20px; padding-bottom:100px; flex:1; display:flex; flex-direction:column; position:relative; }
.scroll-wrap { overflow-y:auto; flex:1; -webkit-overflow-scrolling: touch; }
.hidden { display:none !important; }
h1, h2, h3 { margin:0 0 10px 0; }

/* BUTTONS */
.btn { border:none; padding:16px 24px; border-radius:12px; font-weight:bold; cursor:pointer; font-size:1.1rem; color:white; transition:0.2s; display:inline-flex; align-items:center; justify-content:center; gap:8px; touch-action: manipulation; }
.btn:active { transform:scale(0.98); }
.btn-primary { background:var(--accent); box-shadow:0 4px 12px rgba(59,130,246,0.3); }
.btn-exam { background:var(--warning); color:#000; }
.btn-outline { background:transparent; border:1px solid var(--border); color:var(--muted); font-size:0.9rem; padding:10px 16px; }
.btn-block { width:100%; }

/* START SCREEN */
#start-screen { text-align:center; }
.mode-card { background:var(--panel); border:1px solid var(--border); padding:20px; border-radius:16px; margin-bottom:15px; text-align:left; cursor:pointer; transition:0.2s; display:flex; justify-content:space-between; align-items:center; }
.mode-card:active { background:rgba(255,255,255,0.05); border-color:var(--accent); }
.tag { font-size:0.75rem; padding:4px 8px; border-radius:6px; background:rgba(255,255,255,0.1); font-weight:bold; }

/* TRAINER MODE */
.top-bar { display:flex; justify-content:space-between; align-items:center; margin-bottom:15px; font-size:0.9rem; color:var(--muted); }
.streak-box { color:var(--accent); font-weight:bold; font-size:1.1rem; }
.progress-track { height:8px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden; margin-bottom:20px; }
.progress-fill { height:100%; background:var(--accent); width:0%; transition:width 0.3s; }
.card { background:var(--panel); border:1px solid var(--border); border-radius:20px; padding:25px; display:flex; flex-direction:column; gap:20px; box-shadow:0 10px 30px rgba(0,0,0,0.3); margin-bottom:20px; }
.q-meta { font-size:11px; text-transform:uppercase; letter-spacing:1px; color:var(--muted); font-weight:bold; }
.q-text { font-size:1.35rem; line-height:1.45; font-weight:700; }
.opt-grid { display:grid; gap:12px; }
.opt-btn { background:rgba(255,255,255,0.05); border:1px solid var(--border); padding:18px; border-radius:12px; color:var(--text); text-align:left; cursor:pointer; transition:0.1s; display:flex; align-items:center; min-height:60px; }
.opt-btn:active:not(.disabled) { background:rgba(255,255,255,0.1); transform:scale(0.99); }
.opt-key { background:rgba(0,0,0,0.3); width:28px; height:28px; display:flex; align-items:center; justify-content:center; border-radius:6px; margin-right:15px; font-size:0.9rem; font-family:monospace; border:1px solid var(--border); color:var(--muted); flex-shrink:0; }
.opt-btn.correct { background:rgba(34,197,94,0.15); border-color:var(--success); color:var(--success); }
.opt-btn.wrong { background:rgba(239,68,68,0.15); border-color:var(--error); color:var(--error); opacity:0.6; }
.opt-btn.disabled { pointer-events:none; }

/* EXPLANATION BOX */
.expl-box { padding:15px; border-radius:12px; margin-top:0px; display:none; animation:fadeIn 0.3s; font-size:0.95rem; line-height:1.5; border-left:4px solid transparent; background:rgba(0,0,0,0.2); }
.expl-box.is-correct { border-left-color:var(--success); }
.expl-box.is-wrong { border-left-color:var(--error); }
.expl-title { font-weight:bold; margin-bottom:5px; display:block; }

/* EXAM MODE */
.exam-item { background:var(--panel); padding:20px; border-radius:12px; border:1px solid var(--border); margin-bottom:15px; }
.exam-q { font-size:1.1rem; font-weight:600; margin-bottom:15px; }
.exam-opt { display:flex; align-items:start; gap:15px; padding:12px; cursor:pointer; border-radius:8px; transition:background 0.2s; }
.exam-opt:active { background:rgba(255,255,255,0.05); }
.exam-opt input { margin-top:4px; transform:scale(1.3); }
.exam-expl { margin-top:15px; padding-top:15px; border-top:1px solid var(--border); color:var(--muted); font-size:0.9rem; display:none; }
.exam-item.graded-correct { border-color:var(--success); }
.exam-item.graded-wrong { border-color:var(--error); }
.exam-item.graded-correct .exam-expl, .exam-item.graded-wrong .exam-expl { display:block; }
.exam-score-box { background:var(--panel); padding:30px; border-radius:20px; margin-bottom:20px; text-align:center; border:1px solid var(--border); }

@keyframes fadeIn { from { opacity:0; transform:translateY(5px); } to { opacity:1; transform:translateY(0); } }
</style>
</head>
<body>

<div id="start-screen" class="wrap scroll-wrap">
    <div style="margin:40px 0; text-align:center;">
        <div style="font-size:3rem; margin-bottom:10px;">üõ°Ô∏è</div>
        <h1>CyberOffz Lernportal</h1>
        <p style="color:var(--muted)">W√§hle deinen Modus.</p>
    </div>
    <div class="mode-card" onclick="initTrainer('ALL')">
        <div>
            <h3>üöÄ Speed-Trainer (Alles)</h3>
            <div style="color:var(--muted); font-size:0.85rem; margin-top:5px;">Karteikarten ‚Ä¢ Sofort-Feedback ‚Ä¢ Vibra</div>
        </div>
        <div class="tag" style="background:var(--accent)">LERNEN</div>
    </div>
    <div class="mode-card" onclick="initExam()">
        <div>
            <h3>üìù Pr√ºfungsmodus (45)</h3>
            <div style="color:var(--muted); font-size:0.85rem; margin-top:5px;">Listenansicht ‚Ä¢ Ernstfall ‚Ä¢ Note</div>
        </div>
        <div class="tag" style="background:var(--warning); color:#000;">TEST</div>
    </div>
    <h3 style="margin-top:30px; border-bottom:1px solid var(--border); padding-bottom:10px;">Themen-Filter</h3>
    <div id="module-list" style="display:grid; grid-template-columns:1fr 1fr; gap:10px;"></div>
</div>

<div id="trainer-screen" class="wrap scroll-wrap hidden">
    <div class="top-bar">
        <button class="btn btn-outline" onclick="location.reload()">Beenden</button>
        <div class="streak-box">üî• <span id="t-streak">0</span></div>
    </div>
    <div class="progress-track"><div id="t-progress" class="progress-fill"></div></div>
    
    <div class="card">
        <div class="q-meta">
            <span id="t-mod">MODUL</span> ‚Ä¢ <span id="t-idx">1/10</span>
            <span id="t-retry-badge" class="hidden" style="color:var(--error); margin-left:10px;">‚ö† WIEDERHOLUNG</span>
        </div>
        <div class="q-text" id="t-question"></div>
        <div class="opt-grid" id="t-options"></div>
        
        <div id="t-expl" class="expl-box">
            <span class="expl-title" id="t-expl-title"></span>
            <span id="t-expl-text"></span>
        </div>
    </div>
    
    <button id="next-btn" class="btn btn-primary btn-block" style="display:none; margin-bottom:30px;" onclick="nextCard()">N√§chste Frage ‚ûî</button>
</div>

<div id="exam-screen" class="wrap scroll-wrap hidden">
    <div class="top-bar">
        <button class="btn btn-outline" onclick="if(confirm('Pr√ºfung abbrechen?')) location.reload()">Abbrechen</button>
        <div>Pr√ºfungssimulation</div>
    </div>
    <div id="exam-result-header" class="hidden"></div>
    <div id="exam-list"></div>
    <div style="margin-top:30px; padding-top:20px; border-top:1px solid var(--border);">
        <button id="btn-submit-exam" class="btn btn-primary btn-block" onclick="submitExam()">Pr√ºfung jetzt abgeben</button>
    </div>
</div>

<script>
/* --- 96 FRAGEN DATENBANK --- */
const BANK = [
    // --- GRUNDLAGEN ---
    { q: "Welches Schutzziel wird verletzt, wenn ein Angreifer eine Webseite so √ºberlastet, dass sie nicht mehr erreichbar ist?", a: "Verf√ºgbarkeit", e: "Verf√ºgbarkeit garantiert den Zugriff. DDoS-Angriffe zielen darauf ab, genau diesen Zugriff zu unterbinden.", o: ["Vertraulichkeit", "Verf√ºgbarkeit", "Integrit√§t", "Authentizit√§t"], m: "GRUNDLAGEN" },
    { q: "Was beschreibt die 'Integrit√§t' von Informationen?", a: "Dass Daten nicht unbefugt oder unbemerkt ver√§ndert werden k√∂nnen.", e: "Integrit√§t sch√ºtzt vor Manipulation. Daten m√ºssen vollst√§ndig und korrekt sein.", o: ["Dass Daten nur f√ºr Berechtigte lesbar sind", "Dass Daten jederzeit abrufbar sind", "Dass Daten nicht unbefugt oder unbemerkt ver√§ndert werden k√∂nnen.", "Dass der Absender eindeutig identifizierbar ist"], m: "GRUNDLAGEN" },
    { q: "Was ist ein 'SSI' (Security Significant Item)?", a: "Sicherheitsempfindliche Gegenst√§nde oder Komponenten.", e: "SSIs sind kritische Bauteile (z.B. in Waffensystemen oder IT), die besonderen Schutz ben√∂tigen.", o: ["Software-Security-Interface", "Sicherheitsempfindliche Gegenst√§nde oder Komponenten.", "Sicherheits-Service-Instanz", "System-Sicherheits-Index"], m: "GRUNDLAGEN" },
    { q: "Welche Einstufung ist h√∂her: VS-GEHEIM oder VS-VERTRAULICH?", a: "VS-GEHEIM", e: "Reihenfolge: VS-NfD < VS-VERTRAULICH < VS-GEHEIM < STRENG GEHEIM.", o: ["VS-NfD", "VS-VERTRAULICH", "VS-GEHEIM", "Beide sind gleich"], m: "GRUNDLAGEN" },
    { q: "Wie lautet die Kernformel f√ºr die Informationssicherheit?", a: "Gef√§hrdung = Bedrohung + Schwachstelle", e: "Eine Bedrohung allein ist harmlos. Erst wenn sie auf eine Schwachstelle trifft, entsteht eine Gef√§hrdung.", o: ["Risiko = Hacker x Zeit", "Gef√§hrdung = Bedrohung + Schwachstelle", "Sicherheit = Firewall + Antivirus", "Schutz = Passwort + Verschl√ºsselung"], m: "GRUNDLAGEN" },
    { q: "Wer tr√§gt die Gesamtverantwortung f√ºr die Informationssicherheit in einer Dienststelle?", a: "Der Dienststellenleiter", e: "Verantwortung ist unteilbar. Der DStL haftet, der ISB ber√§t und unterst√ºtzt nur.", o: ["Der IT-Offizier", "Der ISB", "Der Dienststellenleiter", "Der Kryptoverwalter"], m: "GRUNDLAGEN" },
    { q: "Welches Dokument muss jeder unterschreiben, der mit VS arbeitet?", a: "Sicherheitsbelehrung / Verpflichtung auf den Geheimschutz.", e: "Ohne Belehrung kein Zugriff. Dies ist die formale Grundlage f√ºr den Umgang mit VS.", o: ["Mietvertrag", "Sicherheitsbelehrung / Verpflichtung auf den Geheimschutz.", "Urlaubsantrag", "Waffenschein"], m: "GRUNDLAGEN" },
    { q: "Wie wird der Status von Personen bezeichnet, die VS bearbeiten und Kenntnis von ihrem Inhalt erhalten?", a: "Zugang zu Verschlusssachen", e: "'Zugang' bedeutet inhaltliche Kenntnisnahme. 'Zugriff' bezieht sich meist auf IT-Systeme.", o: ["Zutritt zu VS-Bereichen", "Zugriff auf IT-Systeme", "Zugang zu Verschlusssachen", "Erm√§chtigung zur Akteneinsicht"], m: "GRUNDLAGEN" },
    { q: "Welches sind die drei klassischen Authentifizierungsmerkmale?", a: "Wissen, Besitz, Eigenschaft", e: "Wissen (Passwort), Besitz (Token/Smartcard), Eigenschaft (Biometrie).", o: ["Passwort, PIN, Token", "Wissen, Besitz, Eigenschaft", "Ausweis, Unterschrift, Gesicht", "Name, Dienstgrad, PK"], m: "GRUNDLAGEN" },

    // --- BEDROHUNGEN & APT ---
    { q: "Welche Phase der Cyber Kill Chain beschreibt das Ausnutzen einer Sicherheitsl√ºcke auf dem Zielsystem?", a: "Exploitation", e: "Hier wird der Schadcode ausgef√ºhrt, um die Kontrolle zu √ºbernehmen (z.B. Buffer Overflow).", o: ["Weaponization", "Delivery", "Exploitation", "Installation"], m: "BEDROHUNGEN" },
    { q: "In der 'Pyramid of Pain' sind Hash-Werte f√ºr Angreifer leicht zu √§ndern. Welches Element ist am schwierigsten zu √§ndern?", a: "TTPs (Tactics, Techniques & Procedures)", e: "Verhalten zu √§ndern erfordert Umschulung und Neuentwicklung beim Angreifer.", o: ["IP-Adressen", "Domainnamen", "Werkzeuge", "TTPs (Tactics, Techniques & Procedures)"], m: "BEDROHUNGEN" },
    { q: "Was ist das Hauptmerkmal eines 'APT' (Advanced Persistent Threat)?", a: "Langanhaltende, zielgerichtete und hochkomplexe Angriffe.", e: "Persistenz ist der Schl√ºssel: Der Angreifer will dauerhaft im Netz bleiben.", o: ["Ein automatisierter Virenscan", "Ein kurzer, zuf√§lliger Angriff", "Langanhaltende, zielgerichtete und hochkomplexe Angriffe.", "Ein Angriff durch gelangweilte Jugendliche"], m: "BEDROHUNGEN" },
    { q: "Was beschreibt 'Lateral Movement'?", a: "Das Ausbreiten des Angreifers innerhalb des Netzwerks von System zu System.", e: "Bewegung vom Einstiegspunkt (Patient Zero) hin zu den wertvollen Daten.", o: ["Das Herunterladen von Daten", "Das L√∂schen von Log-Dateien", "Das Ausbreiten des Angreifers innerhalb des Netzwerks von System zu System.", "Die erste Infektion per E-Mail"], m: "BEDROHUNGEN" },
    { q: "Was beschreibt die 'Reconnaissance' in der Cyber Kill Chain?", a: "Das Sammeln von Informationen √ºber das Ziel.", e: "Aufkl√§rung: OSINT, Scans, E-Mail-Adressen sammeln vor dem Angriff.", o: ["Das Erstellen von Exploits", "Das Sammeln von Informationen √ºber das Ziel.", "Das Installieren einer Backdoor", "Den Abfluss von Daten"], m: "BEDROHUNGEN" },
    { q: "Welches Framework bietet eine Wissensdatenbank f√ºr Taktiken und Techniken von Angreifern basierend auf Realwelt-Beobachtungen?", a: "MITRE ATT&CK", e: "Der Industriestandard zur Beschreibung von Angreiferverhalten (TTPs).", o: ["Cyber Kill Chain", "Diamond Model", "MITRE ATT&CK", "ISO 27001"], m: "BEDROHUNGEN" },
    { q: "In der Pyramid of Pain: Was sind 'Tools'?", a: "Software, die der Angreifer nutzt (z.B. Mimikatz, PowerShell).", e: "Tools sind Werkzeuge. Sie sind schwerer zu tauschen als IPs, aber leichter als TTPs.", o: ["IP-Adressen des Angreifers", "Software, die der Angreifer nutzt (z.B. Mimikatz, PowerShell).", "Das strategische Ziel des Angriffs", "Die Registrierungsdaten der Domain"], m: "BEDROHUNGEN" },
    { q: "Welches Modell nutzt die vier Kernpunkte: Akteur, F√§higkeit, Infrastruktur und Opfer?", a: "Diamond Model", e: "Ein Modell zur Analyse von Einzelereignissen und deren Zusammenh√§ngen.", o: ["Lockheed Martin Kill Chain", "Diamond Model", "STRIDE", "PASTA"], m: "BEDROHUNGEN" },
    { q: "Was versteht man unter 'Weaponization'?", a: "Koppelung eines Exploits mit einer Hintert√ºr zu einem auslieferbaren Paket.", e: "Der Bau der 'Cyber-Waffe' (z.B. PDF mit Exploit).", o: ["Das physische Bewaffnen von Wachposten", "Koppelung eines Exploits mit einer Hintert√ºr zu einem auslieferbaren Paket.", "Das Scannen von Ports", "Das Verschl√ºsseln der Festplatte"], m: "BEDROHUNGEN" },
    { q: "Was ist ein 'IOC' (Indicator of Compromise)?", a: "Ein technisches Merkmal (z.B. Hash, IP), das auf eine Infektion hinweist.", e: "Spuren eines Angriffs (Forensik), z.B. C2-Server-IP oder Datei-Hash.", o: ["Ein Zertifikat f√ºr sichere Software", "Ein technisches Merkmal (z.B. Hash, IP), das auf eine Infektion hinweist.", "Ein spezieller Dienstgrad im CIR", "Eine Methode zur Passwort-Verschl√ºsselung"], m: "BEDROHUNGEN" },
    { q: "Was ist 'Social Engineering'?", a: "Die Manipulation von Menschen, um an geheime Informationen zu gelangen.", e: "Angriff auf die 'Human Firewall'.", o: ["Das Programmieren von sozialen Netzwerken", "Die Manipulation von Menschen, um an geheime Informationen zu gelangen.", "Ein spezieller Ingenieurstudiengang", "Das Hacken von Datenbanken"], m: "BEDROHUNGEN" },
    { q: "Welches Modell hilft dabei, Angriffe aus der Sicht der Verteidiger zu simulieren (Red Teaming)?", a: "MITRE ATT&CK Matrix", e: "Red Teams nutzen ATT&CK, um realistische Angriffsszenarien nachzubauen.", o: ["Wasserfallmodell", "Diamond Model", "MITRE ATT&CK Matrix", "V-Modell"], m: "BEDROHUNGEN" },
    { q: "Was ist ein wesentlicher Vorteil von Bedrohungsmodellierung?", a: "Einblicke in das Verhalten von Angreifern zu erhalten", e: "Weg von reiner Technik, hin zum Verstehen des Gegners.", o: ["Einblicke in das Verhalten von Angreifern zu erhalten", "Vollst√§ndige Automatisierung der Abwehr", "Einsparung von IT-Personal", "Ersatz f√ºr physische Sicherheitsma√ünahmen"], m: "BEDROHUNGEN" },
    { q: "TTPs (Tactics, Techniques & Procedures) sind sehr best√§ndig und k√∂nnen deswegen leichter automatisiert erkannt werden. Ist diese Aussage korrekt?", a: "Nein, das ist falsch.", e: "TTPs sind schwer zu erkennen, da sie oft legitimes Verhalten simulieren. Hashwerte sind leicht zu erkennen.", o: ["Ja, das ist richtig.", "Nein, das ist falsch.", "Nur bei privatem WLAN.", "Nur bei Hardware-Angriffen."], m: "BEDROHUNGEN" },
    { q: "Was ist ein wesentlicher Nachteil des Diamond Models?", a: "Es ist schwer anwendbar auf komplexe Bedrohungen.", e: "Es bildet komplexe Angriffsketten (Chains) oft schlechter ab als die Kill Chain.", o: ["Es ben√∂tigt zu viel Rechenleistung.", "Es ist schwer anwendbar auf komplexe Bedrohungen.", "Es ist nur f√ºr Phishing-Mails geeignet.", "Es wurde vom BSI verboten."], m: "BEDROHUNGEN" },
    { q: "Living-off-the-Land (LotL) Techniken erschweren die Erkennung, da sie √ºbliche, bereits vorhandene Software verwenden. Ist das korrekt?", a: "Ja, das ist richtig.", e: "Nutzung von PowerShell, WMI etc. statt eigener Malware-Dateien.", o: ["Ja, das ist richtig.", "Nein, das ist falsch.", "LotL bezieht sich nur auf Hardware-Diebstahl.", "LotL wird nur von Einzelt√§tern genutzt."], m: "BEDROHUNGEN" },
    { q: "Liegt der prim√§re Fokus bei MITRE ATT&CK auf IOCs (Indicators of Compromise)?", a: "Nein, das ist falsch.", e: "Fokus liegt auf Taktiken und Techniken (Verhalten), nicht auf einfachen IOCs.", o: ["Ja, das ist richtig.", "Nein, das ist falsch.", "Nur bei Ransomware-Angriffen.", "Nur f√ºr VS-NfD eingestufte Netze."], m: "BEDROHUNGEN" },
    { q: "Ein Virus ist ein selbstreplizierender Code, der kein Wirtsprogramm ben√∂tigt. Korrekt?", a: "Falsch, ein Wurm ben√∂tigt kein Wirtsprogramm.", e: "Virus = braucht Wirt (Datei). Wurm = eigenst√§ndig im Netz.", o: ["Richtig.", "Falsch, ein Trojaner ben√∂tigt kein Wirtsprogramm.", "Falsch, ein Wurm ben√∂tigt kein Wirtsprogramm.", "Falsch, Malware ben√∂tigt immer Internet."], m: "BEDROHUNGEN" },
    { q: "Als seri√∂se Sicherheitssoftware getarnte Schadsoftware bezeichnet man als...", a: "Rougeware", e: "Auch 'Scareware' genannt. T√§uscht Infektion vor, um Geld zu erpressen.", o: ["Spyware", "Rougeware", "Adware", "Firmware"], m: "BEDROHUNGEN" },
    { q: "Was bezeichnet KEIN typisches Einfallstor f√ºr Ransomware?", a: "MFA (Mehrfaktorauthentifizierung)", e: "MFA verhindert Angriffe. Phishing, RDP und Schwachstellen erm√∂glichen sie.", o: ["Phishing-E-Mails", "MFA (Mehrfaktorauthentifizierung)", "RDP-Schwachstellen", "Ungepatchte VPN-Server"], m: "BEDROHUNGEN" },
    { q: "Was versteht man unter 'Vishing'?", a: "Phishing per Telefonanruf", e: "Voice Phishing (z.B. Fake-Support-Anrufe).", o: ["Phishing per Video-Stream", "Phishing per Telefonanruf", "Verschl√ºsselung von Festplatten", "Abfangen von Funksignalen"], m: "BEDROHUNGEN" },
    { q: "Was beschreibt KEINE Quelle f√ºr OSINT (Open Source Intelligence)?", a: "Intranet der Bundeswehr", e: "OSINT nutzt nur √∂ffentlich zug√§ngliche Quellen. Das Intranet ist intern/geschlossen.", o: ["Soziale Medien", "Zeitungsartikel", "√ñffentliche Datenbanken", "Intranet der Bundeswehr"], m: "BEDROHUNGEN" },
    { q: "Beim 'Credential Stuffing' werden h√§ufig genutzte Passw√∂rter (z.B. 'Passwort123') bei vielen verschiedenen Accounts getestet. Korrekt?", a: "Nein, das ist falsch (das w√§re Password Spraying).", e: "Credential Stuffing nutzt geleakte Zugangsdaten (User+Passwort) aus anderen Hacks.", o: ["Ja, das ist richtig.", "Nein, das ist falsch (das w√§re Password Spraying).", "Nein, das w√§re Social Engineering.", "Ja, das ist das Standardvorgehen bei Brute Force."], m: "BEDROHUNGEN" },
    { q: "Was unterscheidet Spear-Phishing von regul√§rem Phishing?", a: "Es handelt sich um einen gezielten Angriff auf eine bestimmte Person oder Organisation.", e: "Masse (Phishing) vs. Klasse/Zielgenauigkeit (Spear Phishing).", o: ["Es wird nur √ºber SMS verschickt.", "Es handelt sich um einen gezielten Angriff auf eine bestimmte Person oder Organisation.", "Es wird nur von staatlichen Akteuren genutzt.", "Es ist technisch nicht nachweisbar."], m: "BEDROHUNGEN" },
    { q: "Welches Ziel verfolgt SEO-Poisoning?", a: "Umleiten von Nutzern √ºber Suchmaschinen auf sch√§dliche Seiten.", e: "Manipulation von Suchergebnissen, um Opfer auf Malware-Seiten zu locken.", o: ["Das L√∂schen von Google-Eintr√§gen.", "Umleiten von Nutzern √ºber Suchmaschinen auf sch√§dliche Seiten.", "Das Hacken von Datenbanken √ºber SQL-Injections.", "Das Versenden von Spam-Mails."], m: "BEDROHUNGEN" },
    { q: "Welche Ma√ünahme verringert das Risiko von Zero-Day-Exploits NICHT?", a: "Regelm√§√üige Backups", e: "Backups helfen bei der Wiederherstellung, verhindern aber nicht den Exploit selbst.", o: ["Netzsegmentierung", "Sandboxing", "Regelm√§√üige Backups", "Intrusion Detection Systeme"], m: "BEDROHUNGEN" },
    { q: "Handelt es sich bei APT-Gruppen grunds√§tzlich NUR um Bedrohungsakteure, die im Auftrag einer Regierung handeln?", a: "Nein, das ist falsch.", e: "Auch hochprofessionelle Cyberkriminelle (Ransomware-Gangs) k√∂nnen APT-Charakteristika aufweisen.", o: ["Ja, das ist die Definition.", "Nein, das ist falsch.", "Nur wenn sie aus Europa kommen.", "Ja, aber nur im Kriegsfall."], m: "BEDROHUNGEN" },
    { q: "Welche Technik wird oft von APT-Gruppen genutzt, um den Erstzugang zu einem Netzwerk zu erhalten?", a: "Spear-Phishing", e: "Die E-Mail ist nach wie vor das Einfallstor Nr. 1.", o: ["DDoS-Angriffe", "Spear-Phishing", "Physischer Einbruch", "Brute-Force auf WLAN-Passw√∂rter"], m: "BEDROHUNGEN" },
    { q: "Welcher Punkt tr√§gt NICHT zur Schwierigkeit der Attribution (Zuweisung) von Cyberangriffen bei?", a: "Mangelhafte operative Sicherheitsma√ünahmen der Verteidiger.", e: "Schlechte Verteidigung macht den Angriff leichter, verschleiert aber nicht die Herkunft des T√§ters.", o: ["Einsatz von False-Flag-Operationen.", "Nutzung von Standard-Malware.", "Mangelhafte operative Sicherheitsma√ünahmen der Verteidiger.", "Verschleierung √ºber Proxy-Server."], m: "BEDROHUNGEN" },

    // --- SCHUTZKONZEPTE ---
    { q: "Was beschreibt die 'Organisation' im OPTI-Modell?", a: "Regelungen, Konzepte und Richtlinien.", e: "Dienstvorschriften und Prozesse bilden den organisatorischen Rahmen.", o: ["Bauliche Ma√ünahmen", "Regelungen, Konzepte und Richtlinien.", "Firewalls und Verschl√ºsselung", "√úberpr√ºfung von Mitarbeitern"], m: "SCHUTZKONZEPTE" },
    { q: "Was ist eine 'WAF' (Web Application Firewall)?", a: "Eine Firewall, die speziell den HTTP/HTTPS-Verkehr auf Anwendungsebene filtert.", e: "Sch√ºtzt Webserver vor SQL-Injection, XSS und anderen Layer-7-Angriffen.", o: ["Ein Schutz gegen WLAN-Hacker", "Ein Hardware-Schutz f√ºr Serverr√§ume", "Eine Firewall, die speziell den HTTP/HTTPS-Verkehr auf Anwendungsebene filtert.", "Ein Tool zur Passwortverwaltung"], m: "SCHUTZKONZEPTE" },
    { q: "Wof√ºr steht 'SIEM'?", a: "Security Information and Event Management", e: "Zentrale Sammlung und Auswertung von Sicherheitslogs.", o: ["System Information and Electronic Mail", "Security Information and Event Management", "Secure Internal Encryption Mode", "Software Interface for Electronic Monitoring"], m: "SCHUTZKONZEPTE" },
    { q: "Was ist ein 'Honey Pot'?", a: "Ein K√∂dersystem, das Angreifer anlocken und deren Verhalten analysieren soll.", e: "Simuliert ein lohnendes Ziel, dient aber nur der Detektion.", o: ["Ein sehr sicheres Passwort", "Ein Backup-Server", "Ein K√∂dersystem, das Angreifer anlocken und deren Verhalten analysieren soll.", "Eine Verschl√ºsselungsmethode"], m: "SCHUTZKONZEPTE" },
    { q: "Was ist der Vorteil von Netzsegmentierung?", a: "Schadsoftware kann sich nicht ungehindert im gesamten Netzwerk ausbreiten.", e: "Schotten dicht machen: Einbruch in Segment A gef√§hrdet nicht Segment B.", o: ["Das Internet wird schneller", "Die Hardware h√§lt l√§nger", "Schadsoftware kann sich nicht ungehindert im gesamten Netzwerk ausbreiten.", "Man spart Strom"], m: "SCHUTZKONZEPTE" },
    { q: "Welche S√§ule im PIMO-Modell umfasst die 'Sensibilisierung und Ausbildung'?", a: "Personal", e: "Der Mensch ist oft das schw√§chste Glied, aber auch die erste Verteidigungslinie.", o: ["Infrastruktur", "Personal", "Organisation", "Methodik"], m: "SCHUTZKONZEPTE" },
    { q: "Was f√§llt unter die S√§ule 'Infrastruktur' (PIMO)?", a: "Zutrittskontrollsysteme, Z√§une und Tresore.", e: "Physische Sicherheit (Geb√§ude, R√§ume).", o: ["Virenscanner", "Dienstanweisungen", "Zutrittskontrollsysteme, Z√§une und Tresore.", "Firewall-Regeln"], m: "SCHUTZKONZEPTE" },
    { q: "Was ist ein 'IDS' (Intrusion Detection System)?", a: "Ein System, das Angriffe erkennt und alarmiert, aber nicht aktiv blockt.", e: "IDS ist die Alarmanlage (Passiv). IPS (Prevention) w√§re der Wachhund, der bei√üt.", o: ["Ein System zum L√∂schen von Viren", "Ein System, das Angriffe erkennt und alarmiert, aber nicht aktiv blockt.", "Eine Hardware-Verschl√ºsselung", "Ein Backup-Verfahren"], m: "SCHUTZKONZEPTE" },
    { q: "Was ist 'Defense in Depth'?", a: "Ein mehrschichtiges Sicherheitskonzept (gestaffelte Verteidigung).", e: "Zwiebelschalenprinzip: Versagt eine H√ºrde, greift die n√§chste.", o: ["Das Vergraben von Servern im Boden", "Ein mehrschichtiges Sicherheitskonzept (gestaffelte Verteidigung).", "Die Verteidigung der Au√üengrenzen", "Verschl√ºsselung mit sehr langen Schl√ºsseln"], m: "SCHUTZKONZEPTE" },
    { q: "Welches System dient der Filterung von ausgehendem Webverkehr f√ºr interne Nutzer?", a: "Forward Proxy", e: "Clients greifen √ºber den Forward Proxy auf das Internet zu (Kontrolle, Caching).", o: ["Reverse Proxy", "Forward Proxy", "WAF", "Honey Pot"], m: "SCHUTZKONZEPTE" },
    { q: "Wer unterst√ºtzt den Dienststellenleiter fachlich bei der Umsetzung der Informationssicherheit?", a: "Der Informationssicherheitsbeauftragte (ISB).", e: "Der ISB ist der zentrale Ansprechpartner und Koordinator f√ºr InfoSi.", o: ["Der S6-Offizier", "Der IT-Administrator", "Der Informationssicherheitsbeauftragte (ISB).", "Der Spie√ü"], m: "SCHUTZKONZEPTE" },
    { q: "Welche Aufgabe hat der IT-Sicherheitsbeauftragte (IT-SiB)?", a: "Umsetzung technischer Sicherheitsma√ünahmen im IT-System.", o: ["Schreiben von Gesetzen", "Umsetzung technischer Sicherheitsma√ünahmen im IT-System.", "Kontrolle des Speiseplans", "√úberpr√ºfung der k√∂rperlichen Fitness"], m: "SCHUTZKONZEPTE" },
    // --- NEUE FRAGEN: DATENSCHUTZ & GRUNDLAGEN (Gem√§√ü Pr√§sentation) ---
    { 
        q: "Was versteht man unter dem Gew√§hrleistungsziel 'Nichtverkettung'?", 
        a: "Zu unterschiedlichen Zwecken erhobene Daten d√ºrfen nicht einfach zusammengef√ºhrt werden.", 
        e: "Daten m√ºssen zweckgebunden verarbeitet werden. Eine wahllose Verkn√ºpfung verschiedener Datenbanken ist unzul√§ssig.", 
        o: ["Daten m√ºssen nach 10 Jahren automatisch gel√∂scht werden.", "Daten d√ºrfen nur verschl√ºsselt gespeichert werden.", "Zu unterschiedlichen Zwecken erhobene Daten d√ºrfen nicht einfach zusammengef√ºhrt werden.", "Der Zugriff auf Daten muss l√ºckenlos protokolliert werden."], 
        m: "DATENSCHUTZ" 
    },
    { 
        q: "Welche Daten geh√∂ren zu den 'Besonderen personenbezogenen Daten' (BPersDat) gem√§√ü Art. 9 DSGVO?", 
        a: "Gesundheitsdaten, religi√∂se √úberzeugung oder biometrische Daten.", 
        e: "Diese Daten gelten als besonders sensibel und schutzbed√ºrftig, da ihr Missbrauch tiefgreifende Auswirkungen auf die Pers√∂nlichkeitsrechte hat.", 
        o: ["Name, Dienstgrad und dienstliche Telefonnummer.", "Gesundheitsdaten, religi√∂se √úberzeugung oder biometrische Daten.", "Private Anschrift und Bankverbindung.", "Personalnummer und Beurteilungen."], 
        m: "DATENSCHUTZ" 
    },
    { 
        q: "Welches Gew√§hrleistungsziel fordert, dass Betroffene ihre Rechte (z.B. L√∂schung, Auskunft) wahrnehmen k√∂nnen?", 
        a: "Intervenierbarkeit.", 
        e: "Der Betroffene muss in den Datenverarbeitungsprozess 'intervenieren' k√∂nnen, um z.B. Fehler zu korrigieren oder L√∂schungen zu beantragen.", 
        o: ["Transparenz.", "Intervenierbarkeit.", "Nichtverkettung.", "Integrit√§t."], 
        m: "DATENSCHUTZ" 
    },
    { 
        q: "Was besagt das Prinzip der 'Datenminimierung'?", 
        a: "Die Verarbeitung ist auf das notwendige und dem Zweck angemessene Ma√ü zu beschr√§nken.", 
        e: "Es d√ºrfen keine Daten 'auf Vorrat' gesammelt werden. Nur das, was f√ºr den konkreten Auftrag wirklich gebraucht wird, darf erhoben werden.", 
        o: ["Daten m√ºssen so klein wie m√∂glich komprimiert werden.", "Die Verarbeitung ist auf das notwendige und dem Zweck angemessene Ma√ü zu beschr√§nken.", "Es d√ºrfen maximal 100 Datens√§tze pro Datei gespeichert werden.", "Daten d√ºrfen nur auf USB-Sticks gespeichert werden."], 
        m: "DATENSCHUTZ" 
    },
    { 
        q: "Welchem Schutzbereich werden 'Besondere personenbezogene Daten' (BPersDat) immer zugeordnet?", 
        a: "Schutzbereich 3.", 
        e: "Aufgrund des hohen Schadenspotenzials f√ºr den Betroffenen fallen BPersDat (z.B. Gesundheit) immer in die h√∂chste Schutzkategorie.", 
        o: ["Schutzbereich 1.", "Schutzbereich 2.", "Schutzbereich 3.", "Schutzbereich 4."], 
        m: "DATENSCHUTZ" 
    },
    { 
        q: "Was z√§hlt NICHT zu den 'Besonderen personenbezogenen Daten' (BPersDat)?", 
        a: "Das private Bankkonto.", 
        e: "Bankdaten sind zwar sensibel (Schutzbereich 2), geh√∂ren aber laut Art. 9 DSGVO nicht zur Kategorie der BPersDat (wie Ethnie, Religion, Gesundheit).", 
        o: ["Die ethnische Herkunft.", "Die religi√∂se √úberzeugung.", "Das private Bankkonto.", "Gesundheitsdaten."], 
        m: "DATENSCHUTZ" 
    },
    { 
        q: "Was ist das Ziel der 'Transparenz' im Datenschutz?", 
        a: "Es muss erkennbar sein, wer welche Daten wann und wozu verarbeitet.", 
        e: "Der Betroffene (und die Aufsicht) muss jederzeit nachvollziehen k√∂nnen, was mit den Daten geschieht. Keine 'Black Box'.", 
        o: ["Daten m√ºssen f√ºr jeden √∂ffentlich einsehbar sein.", "Es muss erkennbar sein, wer welche Daten wann und wozu verarbeitet.", "Daten d√ºrfen nur im Klartext gespeichert werden.", "Die Verschl√ºsselung muss offenlegt werden."], 
        m: "DATENSCHUTZ" 
    },
    { 
        q: "Welche Kategorie umfasst Daten wie 'Name', 'Dienstgrad' und 'dienstliche Erreichbarkeit'?", 
        a: "Allgemeine personenbezogene Daten (Funktionstr√§gerdaten).", 
        e: "Diese Daten sind f√ºr die dienstliche Aufgabenerf√ºllung notwendig und fallen in den niedrigsten Schutzbereich 1.", 
        o: ["Besondere personenbezogene Daten.", "Allgemeine personenbezogene Daten (Funktionstr√§gerdaten).", "Verschlusssachen (VS-NfD).", "Private Stammdaten."], 
        m: "DATENSCHUTZ" 
    },
    { 
        q: "Wann liegt ein 'Informationssicherheitsversto√ü' vor?", 
        a: "Wenn angeordnete Sicherheitsma√ünahmen nicht eingehalten wurden.", 
        e: "Ein Versto√ü grenzt sich von der L√ºcke ab: Hier wurden bestehende Regeln (vors√§tzlich oder fahrl√§ssig) missachtet.", 
        o: ["Wenn eine Festplatte defekt ist.", "Wenn angeordnete Sicherheitsma√ünahmen nicht eingehalten wurden.", "Wenn ein Update installiert wird.", "Wenn eine neue Schwachstelle entdeckt wird, f√ºr die es noch keine Regelung gibt."], 
        m: "DATENSCHUTZ" 
    },
    { 
        q: "Worauf bezieht sich der Begriff 'Intervenierbarkeit'?", 
        a: "Auf das Recht des Betroffenen auf Berichtigung, L√∂schung oder Sperrung seiner Daten.", 
        e: "Es sichert dem B√ºrger die Herrschaft √ºber seine eigenen Daten (Informationelle Selbstbestimmung).", 
        o: ["Auf die M√∂glichkeit des Administrators, Passw√∂rter zur√ºckzusetzen.", "Auf das Recht des Vorgesetzten, E-Mails zu lesen.", "Auf das Recht des Betroffenen auf Berichtigung, L√∂schung oder Sperrung seiner Daten.", "Auf die physische Zerst√∂rung von Datentr√§gern."], 
        m: "DATENSCHUTZ" 
    },
    { 
        q: "Sind Gesundheitsdaten (z.B. 90/5) 'Allgemeine personenbezogene Daten'?", 
        a: "Nein, es sind 'Besondere personenbezogene Daten' (BPersDat).", 
        e: "Gesundheitsdaten genie√üen einen h√∂heren Schutzstatus als reine Adress- oder Verwaltungsdaten.", 
        o: ["Ja, sie sind Schutzbereich 1.", "Ja, aber nur f√ºr den Truppenarzt.", "Nein, es sind 'Besondere personenbezogene Daten' (BPersDat).", "Nein, sie sind Verschlusssachen."], 
        m: "DATENSCHUTZ" 
    },
    { 
        q: "In welchem Verh√§ltnis stehen IT-Sicherheit und Informationssicherheit zueinander?", 
        a: "IT-Sicherheit ist ein Teilaspekt der Informationssicherheit.", 
        e: "Informationssicherheit ist der √úberbegriff (sch√ºtzt Informationen egal ob auf Papier oder im Kopf), IT-Sicherheit sch√ºtzt technische Systeme.", 
        o: ["Sie sind exakt dasselbe.", "Informationssicherheit ist ein Teilaspekt der IT-Sicherheit.", "IT-Sicherheit ist ein Teilaspekt der Informationssicherheit.", "IT-Sicherheit betrifft nur Hardware, Informationssicherheit nur Software."], 
        m: "DATENSCHUTZ" 
    },
    { 
        q: "Was ist eine 'Informationssicherheitsl√ºcke'?", 
        a: "Ein neu entdeckter Schwachpunkt, trotz ordnungsgem√§√üer Umsetzung aller Regeln.", 
        e: "Im Gegensatz zum Versto√ü hat hier niemand einen Fehler gemacht; das System hat eine technische oder organisatorische Unzul√§nglichkeit.", 
        o: ["Ein vors√§tzlicher Versto√ü gegen Vorschriften.", "Der Verlust eines Laptops.", "Ein neu entdeckter Schwachpunkt, trotz ordnungsgem√§√üer Umsetzung aller Regeln.", "Das Vergessen des Passworts."], 
        m: "DATENSCHUTZ" 
    },
    { 
        q: "Welche Daten fallen unter das 'allgemeine Pers√∂nlichkeitsrecht'?", 
        a: "Alle personenbezogenen Daten.", 
        e: "Das Recht auf informationelle Selbstbestimmung (Art. 2 GG) sch√ºtzt grunds√§tzlich alle Daten, die einer Person zugeordnet werden k√∂nnen.", 
        o: ["Nur Gesundheitsdaten.", "Nur Daten von Politikern.", "Alle personenbezogenen Daten.", "Nur finanzielle Daten."], 
        m: "DATENSCHUTZ" 
    },
    { 
        q: "Was ist KEINE Kategorie im Schema der Bw-Datenschutzklassen?", 
        a: "Schutzbereich 4.", 
        e: "Das Konzept der Bundeswehr kennt nur die Schutzbereiche 1 (Funktionstr√§ger), 2 (Privates) und 3 (Besonders Sensibles/BPersDat).", 
        o: ["Schutzbereich 1.", "Schutzbereich 2.", "Schutzbereich 3.", "Schutzbereich 4."], 
        m: "DATENSCHUTZ" 
    },

    // --- NEUE FRAGEN: SCHUTZBEREICHE & MA√üNAHMEN (Gem√§√ü Pr√§sentation) ---
    { 
        q: "Welche Daten fallen in den Schutzbereich 1?", 
        a: "Funktionstr√§gerdaten (z.B. Name, Dienstgrad, dienstl. Telefon).", 
        e: "Diese Daten sind f√ºr den Dienstbetrieb erforderlich und weniger schutzbed√ºrftig, da sie die offizielle Funktion betreffen.", 
        o: ["Gesundheitsdaten.", "Private Anschrift und Handynummer.", "Funktionstr√§gerdaten (z.B. Name, Dienstgrad, dienstl. Telefon).", "Disziplinarakten."], 
        m: "SCHUTZBEREICHE" 
    },
    { 
        q: "Welche Daten fallen typischerweise in den Schutzbereich 2?", 
        a: "Private Adressen, Geburtsdatum, Familienstand, Bankverbindung.", 
        e: "Hierbei handelt es sich um private Informationen, die aber noch keine 'besonderen Daten' nach Art. 9 DSGVO sind.", 
        o: ["Funktionstr√§gerdaten.", "Private Adressen, Geburtsdatum, Familienstand, Bankverbindung.", "Gesundheitsdaten.", "Nur √∂ffentliche Informationen."], 
        m: "SCHUTZBEREICHE" 
    },
    { 
        q: "Welche Daten fallen in den Schutzbereich 3?", 
        a: "Disziplinarakten, Sicherheitsakten und alle Gesundheitsdaten.", 
        e: "Hier droht dem Betroffenen der gr√∂√üte Schaden bei Bekanntwerden, daher ist das Schutzniveau am h√∂chsten.", 
        o: ["Dienstliche Telefonlisten.", "Geburtstagslisten.", "Disziplinarakten, Sicherheitsakten und alle Gesundheitsdaten.", "Organigramme der Abteilung."], 
        m: "SCHUTZBEREICHE" 
    },
    { 
        q: "Welche Verschl√ºsselung ist f√ºr Daten des Schutzbereichs 2 (z.B. Excel-Liste mit Geburtstagen) mindestens erforderlich?", 
        a: "7-Zip (AES256) oder MS Office Verschl√ºsselung (ab 2016).", 
        e: "F√ºr SB 2 sind g√§ngige, starke Verschl√ºsselungen wie AES256 in 7-Zip oder modernen Office-Versionen ausreichend.", 
        o: ["Gar keine, Passwortschutz reicht.", "7-Zip (AES256) oder MS Office Verschl√ºsselung (ab 2016).", "Zwingend SINA-Box.", "Rot13-Verfahren."], 
        m: "SCHUTZBEREICHE" 
    },
    { 
        q: "Welche Anforderung gilt f√ºr die Speicherung von Schutzbereich 3-Daten (z.B. Gesundheitsakte digital)?", 
        a: "Zwingende Verschl√ºsselung mit zugelassenen Mitteln (z.B. GnuPG VS-Desktop, Chiasmus).", 
        e: "Einfache Passw√∂rter reichen hier nicht. Es m√ºssen vom BSI/Bw zugelassene Krypto-Tools genutzt werden.", 
        o: ["Speicherung im √∂ffentlichen Ordner.", "Windows-Anmeldepasswort gen√ºgt.", "Zwingende Verschl√ºsselung mit zugelassenen Mitteln (z.B. GnuPG VS-Desktop, Chiasmus).", "Verstecken der Datei in einem Unterordner."], 
        m: "SCHUTZBEREICHE" 
    },
    { 
        q: "Darf man Daten des Schutzbereichs 3 per E-Mail an einen externen Empf√§nger senden?", 
        a: "Grunds√§tzlich verboten.", 
        e: "Der Versand von hochsensiblen Daten (z.B. Gesundheitsdaten) √ºber das offene Internet ist aufgrund des Risikos untersagt.", 
        o: ["Ja, immer.", "Ja, wenn der Empf√§nger vertrauensw√ºrdig wirkt.", "Grunds√§tzlich verboten.", "Nur am Wochenende."], 
        m: "SCHUTZBEREICHE" 
    },
    { 
        q: "Wie m√ºssen Papierunterlagen des Schutzbereichs 1 (z.B. Telefonliste) aufbewahrt werden?", 
        a: "Keine besonderen Anforderungen (B√ºroschrank).", 
        e: "Da es sich um Funktionstr√§gerdaten handelt, ist keine Tresorlagerung vorgeschrieben. Ein normaler B√ºroschrank gen√ºgt.", 
        o: ["Im Panzerschrank.", "Im VS-Verwahrgelass.", "Keine besonderen Anforderungen (B√ºroschrank).", "Sie m√ºssen t√§glich vernichtet werden."], 
        m: "SCHUTZBEREICHE" 
    },
    { 
        q: "Ist die Personalnummer (letzte 5 Ziffern der PK) Schutzbereich 1 oder 2?", 
        a: "Schutzbereich 1 (Sonderstellung).", 
        e: "Die Personalnummer dient der Identifikation im Dienst und wird meist wie ein Funktionstr√§gerdatum (SB 1) behandelt.", 
        o: ["Schutzbereich 1 (Sonderstellung).", "Schutzbereich 2.", "Schutzbereich 3.", "Sie ist √∂ffentlich."], 
        m: "SCHUTZBEREICHE" 
    },
    { 
        q: "Darf ich Daten des Schutzbereichs 2 (z.B. private Handynummern) unverschl√ºsselt per E-Mail im Bw-Intranet versenden?", 
        a: "Nein, Verschl√ºsselung (z.B. S/MIME, Greenshield) ist erforderlich.", 
        e: "Auch im Intranet m√ºssen private Daten vor unbefugter Einsicht (z.B. durch Admins) gesch√ºtzt werden.", 
        o: ["Ja, das Intranet ist sicher.", "Ja, aber nur an Vorgesetzte.", "Nein, Verschl√ºsselung (z.B. S/MIME, Greenshield) ist erforderlich.", "Nur wenn es eilt."], 
        m: "SCHUTZBEREICHE" 
    },
    { 
        q: "F√§llt ein Auszug aus dem Zentralregister in den Schutzbereich 2?", 
        a: "Nein, in Schutzbereich 3.", 
        e: "Daten aus dem Bundeszentralregister (Vorstrafen etc.) sind hochsensibel und geh√∂ren in die h√∂chste Kategorie.", 
        o: ["Ja, Schutzbereich 2.", "Nein, in Schutzbereich 3.", "Nein, Schutzbereich 1.", "Er ist √∂ffentlich."], 
        m: "SCHUTZBEREICHE" 
    },
    { 
        q: "Welche Verschl√ºsselungsmethode wird f√ºr Schutzbereich 1 im E-Mail-Verkehr standardm√§√üig genutzt?", 
        a: "S/MIME (Greenshield) oder Transportverschl√ºsselung.", 
        e: "F√ºr Funktionstr√§gerdaten gen√ºgt die Standardverschl√ºsselung (Outlook/S/MIME), keine zus√§tzliche Dateiverschl√ºsselung n√∂tig.", 
        o: ["GnuPG VS-Desktop.", "Chiasmus.", "S/MIME (Greenshield) oder Transportverschl√ºsselung.", "7-Zip mit 256 Bit."], 
        m: "SCHUTZBEREICHE" 
    },
    { 
        q: "Was ist bei der √úbermittlung von Schutzbereich 1-Daten an Externe zu beachten?", 
        a: "GnuPG-Verschl√ºsselung wird empfohlen, ist aber nicht zwingend, wenn Transportverschl√ºsselung vorliegt.", 
        e: "Da es 'nur' Funktionstr√§gerdaten sind, ist der Schutzbedarf geringer als bei Privatdaten.", 
        o: ["Es ist verboten.", "GnuPG-Verschl√ºsselung ist streng verboten.", "GnuPG-Verschl√ºsselung wird empfohlen, ist aber nicht zwingend, wenn Transportverschl√ºsselung vorliegt.", "Es muss per Bote gesendet werden."], 
        m: "SCHUTZBEREICHE" 
    },
    { 
        q: "Wohin geh√∂ren Daten √ºber 'erfolgte Lehrgangsteilnahmen'?", 
        a: "Schutzbereich 2.", 
        e: "Diese Daten sind Teil der pers√∂nlichen Historie/Akte und privater als reine Name/Dienstgrad-Infos (SB 1).", 
        o: ["Schutzbereich 1.", "Schutzbereich 2.", "Schutzbereich 3.", "√ñffentliche Daten."], 
        m: "SCHUTZBEREICHE" 
    },
    { 
        q: "Welcher Schutzbereich gilt f√ºr 'Sonstige schutzbed√ºrftige Informationen' (z.B. vertrauliche Unternehmensdaten)?", 
        a: "Sie fallen nicht in das SB 1-3 Schema, m√ºssen aber analog gesch√ºtzt werden.", 
        e: "Das Schema SB 1-3 gilt spezifisch f√ºr personenbezogene Daten. Industriedaten etc. sind eine eigene Kategorie.", 
        o: ["Immer Schutzbereich 3.", "Immer Schutzbereich 1.", "Sie fallen nicht in das SB 1-3 Schema, m√ºssen aber analog gesch√ºtzt werden.", "Sie brauchen keinen Schutz."], 
        m: "SCHUTZBEREICHE" 
    },
    { 
        q: "Ist 7-Zip eine zul√§ssige Verschl√ºsselungsmethode f√ºr den Schutzbereich 3?", 
        a: "Ja.", 
        e: "Gem√§√ü der √úbersicht zu Schutzma√ünahmen sind neben Chiasmus/GnuPG auch 7-Zip, PDF-Verschl√ºsselung und MS Office (AES256) f√ºr den Schutzbereich 3 zul√§ssig.", 
        o: ["Nein, nur Chiasmus ist erlaubt.", "Ja.", "Nein, nur f√ºr SB 2.", "Nur in Verbindung mit SINA."], 
        m: "SCHUTZBEREICHE" 
    },
    { 
        q: "Welche der folgenden Verschl√ºsselungen ist f√ºr den Schutzbereich 3 ZUL√ÑSSIG?", 
        a: "MS Office ab Version 2016 mit AES256.", 
        e: "F√ºr SB 3 sind neben PKIBw/GnuPG auch g√§ngige Tools wie MS Office (AES256), 7-Zip und PDF zul√§ssig.", 
        o: ["Alte MS Office Versionen (vor 2016).", "MS Office ab Version 2016 mit AES256.", "Ein einfaches Windows-Passwort.", "Verschl√ºsselung ist f√ºr SB 3 nicht notwendig."], 
        m: "SCHUTZBEREICHE" 
    },

    // --- ABSTRAHLSICHERHEIT ---
    { q: "Was ist das Ziel der Abstrahlsicherheit?", a: "Verhinderung der Aussp√§hung durch kompromittierende elektromagnetische Strahlung.", e: "Schutz vor TEMPEST-Angriffen.", o: ["Schutz vor Blitzeinschl√§gen", "Verhinderung der Aussp√§hung durch kompromittierende elektromagnetische Strahlung.", "K√ºhlung der Server", "Verhinderung von WLAN-St√∂rungen"], m: "ABSTRAHLUNG" },
    { q: "Welche Zone beschreibt einen Bereich, in dem VS nur bearbeitet werden darf, wenn das Ger√§t speziell geschirmt ist?", a: "Zone 2 oder 3", e: "Hier ist der Schutzabstand zu gering, daher muss das Ger√§t selbst sicher sein (SDIP 27 Level A).", o: ["Zone 0", "Zone 1", "Zone 2 oder 3", "Zone X"], m: "ABSTRAHLUNG" },
    { q: "Was bedeutet 'MEP'?", a: "Mess- und Pr√ºfplakette (f√ºr die Abstrahlpr√ºfung).", e: "Kennzeichnet technisch gepr√ºfte Ger√§te.", o: ["Milit√§rische Einzel-Pr√ºfung", "Mess- und Pr√ºfplakette (f√ºr die Abstrahlpr√ºfung).", "Mobile Elektronik-Pr√§vention", "Management-Einstufungs-Protokoll"], m: "ABSTRAHLUNG" },
    { q: "In welchen Abst√§nden muss eine Wiederholungsmessung f√ºr mobile IT-Systeme (MEP) erfolgen?", a: "Sp√§testens nach 12 Monaten.", e: "Mobile Ger√§te unterliegen h√∂herem Verschlei√ü, daher j√§hrliche Pr√ºfung.", o: ["Alle 6 Monate", "Sp√§testens nach 12 Monaten.", "Alle 24 Monate", "Nur bei Defekt"], m: "ABSTRAHLUNG" },
    { q: "In welchem Dokument der Bundeswehr ist die Abstrahlsicherheit prim√§r geregelt?", a: "A-960/1", e: "Die zentrale Vorschrift f√ºr Abstrahlsicherheit.", o: ["A-960/1", "ZDv 3/12", "IT-Grundschutz", "Bw-Krypto-Handbuch"], m: "ABSTRAHLUNG" },
    { q: "Was kennzeichnet die 'Zone 1' im Zonenmodell?", a: "Ein Bereich mit kontrolliertem Zugang, aber geringerem Schutzabstand als Zone 0.", e: "Zone 1 erfordert oft Ger√§te mit SDIP 27 Level B (mittlere Schirmung).", o: ["√ñffentlicher Raum", "H√∂chste Schutzzone im Servergeh√§use", "Ein Bereich mit kontrolliertem Zugang, aber geringerem Schutzabstand als Zone 0.", "Ein mobiles Zelt im Einsatz"], m: "ABSTRAHLUNG" },
    { q: "Welche Farbe hat eine g√ºltige MEP-Plakette?", a: "Rot", e: "Die rote Plakette signalisiert die bestandenene Messung.", o: ["Gr√ºn", "Gelb", "Blau", "Rot"], m: "ABSTRAHLUNG" },
    { q: "Was muss geschehen, wenn ein Ger√§t mit MEP-Plakette repariert wurde (Geh√§use√∂ffnung)?", a: "Es muss eine neue Kurzvermessung durchgef√ºhrt werden.", e: "Das √ñffnen des Geh√§uses kann die Schirmung besch√§digen.", o: ["Nichts", "Es muss weggeworfen werden", "Es muss eine neue Kurzvermessung durchgef√ºhrt werden.", "Es muss nur neu gestartet werden"], m: "ABSTRAHLUNG" },
    { q: "Was beschreibt der Begriff 'Kompromittierende Strahlung'?", a: "Ungewollte elektromagnetische Emissionen, die den Informationsgehalt verraten.", e: "Das Signal 'leckt' aus dem Kabel oder Monitor in die Luft.", o: ["Radioaktive Strahlung aus Monitoren", "Strahlung, die Hardware zerst√∂rt", "Ungewollte elektromagnetische Emissionen, die den Informationsgehalt verraten.", "WLAN-Signale, die das Internet verlangsamen"], m: "ABSTRAHLUNG" },

    // --- KRYPTOSICHERHEIT ---
    
   
    { q: "Wer darf die Vernichtung von Kryptomitteln durchf√ºhren?", a: "Der Kryptoverwalter in Anwesenheit eines Zeugen.", e: "Vier-Augen-Prinzip ist Pflicht. Vernichtung muss protokolliert werden.", o: ["Jeder Soldat", "Nur der IT-Offizier", "Der Kryptoverwalter in Anwesenheit eines Zeugen.", "Nur externes Fachpersonal"], m: "KRYPTO" },
    { q: "Welches Papier-Vernichtungsverfahren ist bei Kryptomitteln NICHT zul√§ssig?", a: "Einfacher Streifenschnitt breiter als 1mm.", e: "Streifen sind zu leicht rekonstruierbar. Es braucht Partikel-/Kreuzschnitt.", o: ["Verbrennen", "Verfl√ºssigen", "Einfacher Streifenschnitt breiter als 1mm.", "Kreuzschnitt (Partikelgr√∂√üe max. 0,5x1,5mm)"], m: "KRYPTO" },
    { q: "In welcher Situation ist eine 'Notvernichtung' einzuleiten?", a: "Bei unmittelbar drohendem Zugriff durch Unbefugte oder den Feind.", e: "Emergency Destruction: Bevor der Feind den Schl√ºssel kriegt, wird er zerst√∂rt.", o: ["Wenn der Schrank voll ist", "Bei unmittelbar drohendem Zugriff durch Unbefugte oder den Feind.", "Wenn das Haltbarkeitsdatum abgelaufen ist", "Bei einem normalen Software-Update"], m: "KRYPTO" },
    { q: "Wie m√ºssen Sonderkurier und Kurierbegleiter im Flugzeug sitzen?", a: "Sie m√ºssen zusammen sitzen und d√ºrfen nicht vom Kuriergep√§ck getrennt werden.", e: "Keine Trennung von Kurier und Material. Niemals im Frachtraum aufgeben.", o: ["Getrennt voneinander (Sicherheit)", "In verschiedenen Klassen", "Sie m√ºssen zusammen sitzen und d√ºrfen nicht vom Kuriergep√§ck getrennt werden.", "Einer sitzt beim Gep√§ck im Frachtraum"], m: "KRYPTO" },
    { q: "Welches kryptographische Verfahren gilt heute als unsicher (geknackt)?", a: "DES", e: "56 Bit Schl√ºssell√§nge sind zu kurz f√ºr moderne Rechner.", o: ["AES", "DES", "RSA", "ECC"], m: "KRYPTO" },
    { q: "Was ist das Hauptmerkmal einer 'Stromchiffre'?", a: "Die Nachricht wird bitweise oder zeichenweise verschl√ºsselt.", e: "XOR-Verkn√ºpfung eines endlosen Schl√ºsselstroms mit den Daten (z.B. im Funk).", o: ["Die Verschl√ºsselung ben√∂tigt viel Strom", "Die Nachricht wird in gro√üen Bl√∂cken (z.B. 128 Bit) verschl√ºsselt", "Die Nachricht wird bitweise oder zeichenweise verschl√ºsselt.", "Die Verschl√ºsselung funktioniert nur online"], m: "KRYPTO" },
    { q: "Wer ist f√ºr die Einweisung der Kryptobediener (KryB) zust√§ndig?", a: "Der Kryptoverwalter oder der Kryptobeauftragte.", e: "Nur befugtes Personal darf Bediener einweisen.", o: ["Der Kompaniechef", "Der Kryptoverwalter oder der Kryptobeauftragte.", "Das BSI", "Der ISB"], m: "KRYPTO" },
    { q: "Was ist die Hauptaufgabe eines Kryptobeauftragten (KryB)?", a: "√úberwachung der Einhaltung von Krypto-Vorschriften in der Einheit.", e: "Der KryB unterst√ºtzt den KryVw vor Ort in der Einheit.", o: ["Reparatur von Krypto-Ger√§ten", "√úberwachung der Einhaltung von Krypto-Vorschriften in der Einheit.", "Herstellung von eigenen Schl√ºsseln", "Transport von Material als Kurier"], m: "KRYPTO" },
    { q: "Wie viele Personen m√ºssen beim Transport von Kryptovariablen (Schl√ºsseln) anwesend sein?", a: "Zwei (Sonderkurier und Kurierbegleiter).", e: "Immer Vier-Augen-Prinzip beim Transport von Schl√ºsseln.", o: ["Eine Person reicht", "Zwei (Sonderkurier und Kurierbegleiter).", "Drei Personen", "Immer ein ganzer Zug"], m: "KRYPTO" },
    { q: "Welches Verfahren nutzt RSA prim√§r?", a: "Asymmetrische Verschl√ºsselung (Primfaktorzerlegung).", e: "Basiert auf der Schwierigkeit, Produkte gro√üer Primzahlen zu faktorisieren.", o: ["Symmetrische Verschl√ºsselung", "Asymmetrische Verschl√ºsselung (Primfaktorzerlegung).", "Hashing", "Stromchiffrierung"], m: "KRYPTO" },
    { q: "Welche Beh√∂rde ist in Deutschland f√ºr die Zulassung von IT-Sicherheitsprodukten f√ºr VS zust√§ndig?", a: "BSI (Bundesamt f√ºr Sicherheit in der Informationstechnik).", e: "Das BSI erteilt die Zulassung f√ºr VS-Produkte.", o: ["BMVg", "BSI (Bundesamt f√ºr Sicherheit in der Informationstechnik).", "MAD", "BND"], m: "KRYPTO" },
    { q: "Was bedeutet 'Offline-Kryptierung'?", a: "Verschl√ºsselung der Daten vor der √úbertragung (nicht im Stream).", e: "Datei wird erst verschl√ºsselt, dann versendet (End-to-End auf Dateiebene).", o: ["Verschl√ºsselung ohne Strom", "Verschl√ºsselung der Daten vor der √úbertragung (nicht im Stream).", "Verschl√ºsselung in einem Funkger√§t", "L√∂schen von Daten"], m: "KRYPTO" },
    { q: "Ist die Steganographie ein Teilbereich der Kryptographie?", a: "Falsch", e: "Kryptographie = Inhalt unlesbar machen. Steganographie = Existenz der Nachricht verbergen.", o: ["Richtig", "Falsch", "Nur bei digitaler Steganographie", "Nur im Bereich VS-GEHEIM"], m: "KRYPTO" },
    { q: "Welchen Schl√ºssel nutzt Teilnehmer A bei der asymmetrischen Verschl√ºsselung, um Teilnehmer B eine vertrauliche Nachricht zu senden?", a: "Den √∂ffentlichen Schl√ºssel von B", e: "√ñffentlicher Schl√ºssel zum Verschl√ºsseln, Privater zum Entschl√ºsseln.", o: ["Den eigenen privaten Schl√ºssel", "Den eigenen √∂ffentlichen Schl√ºssel", "Den privaten Schl√ºssel von B", "Den √∂ffentlichen Schl√ºssel von B"], m: "KRYPTO" },
    { q: "Aussage: Symmetrische Verschl√ºsselungsmechanismen (z. B. DES) sind grunds√§tzlich sicherer als asymmetrische Verschl√ºsselungen.", a: "Falsch", e: "Nicht sicherer, aber meist performanter (schneller). Sicherheit h√§ngt von der Schl√ºssell√§nge ab.", o: ["Wahr", "Falsch", "Nur bei gro√üen Dateien wahr", "Gilt nur f√ºr das NATO-Netz"], m: "KRYPTO" },
    { q: "Worauf basiert die Sicherheit moderner asymmetrischer Kryptoverfahren?", a: "Auf der Geheimhaltung des privaten Schl√ºssels (Verfahren ist bekannt).", e: "Kerckhoffs‚Äô Prinzip: Nur der Schl√ºssel muss geheim sein, nicht der Algorithmus.", o: ["Auf der Geheimhaltung des Verschl√ºsselungsverfahrens.", "Auf der L√§nge der Nachricht.", "Auf der Geheimhaltung des privaten Schl√ºssels (Verfahren ist bekannt).", "Auf der Geschwindigkeit der Hardware."], m: "KRYPTO" },
    { q: "Womit besch√§ftigt sich die Kryptoanalyse prim√§r?", a: "Dem Brechen von Kryptographieverfahren ohne Kenntnis des Schl√ºssels.", e: "Suche nach mathematischen Schwachstellen im Code.", o: ["Dem Erstellen neuer Codes.", "Dem Brechen von Kryptographieverfahren ohne Kenntnis des Schl√ºssels.", "Der physischen Vernichtung von Krypto-Ger√§ten.", "Der Verwaltung von Passw√∂rtern."], m: "KRYPTO" },
    { q: "Wie viele Nationale Verteilungsorganisationen (NDA) gibt es f√ºr Kryptomaterial in Deutschland?", a: "Genau eine (Zentralisierung).", e: "Nur eine nationale Stelle (Rheinbach), darunter regionale ATZs.", o: ["Eine pro Teilstreitkraft.", "Genau eine (Zentralisierung).", "Vier (analog zu den ATZ).", "Sechzehn (eine pro Bundesland)."], m: "KRYPTO" },
    { q: "Wer tr√§gt die Gesamtverantwortung f√ºr das Kryptomaterial innerhalb einer Dienststelle?", a: "Der Dienststellenleiter (DStL).", e: "Der Leiter haftet immer.", o: ["Der Kryptoverwalter (KryVw).", "Der Dienststellenleiter (DStL).", "Der S6-Offizier.", "Der Kryptobeauftragte (KryB)."], m: "KRYPTO" },
    { q: "Aussage: Die Bundeswehr nutzt f√ºr die operative √úbertragung von Daten √ºberwiegend asymmetrische Verschl√ºsselung.", a: "Falsch (√ºberwiegend symmetrisch wegen Performance/Sicherheit).", e: "Symmetrisch ist schneller f√ºr Massendaten (Funk, WAN).", o: ["Wahr", "Falsch (√ºberwiegend symmetrisch wegen Performance/Sicherheit).", "Wahr, aber nur im Einsatzland.", "Wahr, au√üer bei Funkger√§ten."], m: "KRYPTO" },
    { q: "In welche Kategorie der Kryptomittel f√§llt eine SmartCard?", a: "Kryptounterlagen", e: "Wird wie ein Schl√ºssel (Papier) verwaltet.", o: ["Kryptoger√§te", "Kryptomaterial", "Kryptounterlagen", "IT-Peripherie"], m: "KRYPTO" },
    { q: "In welche Kategorie f√§llt ein Kryptodatentr√§ger (z. B. USB-Stick mit Schl√ºsseln)?", a: "Kryptounterlagen", e: "Auch elektronische Schl√ºsseltr√§ger gelten als Unterlage.", o: ["Kryptoger√§te", "Kryptounterlagen", "Hardware-Komponenten", "Kryptomaterial"], m: "KRYPTO" },
    { q: "Wie wird das Ger√§t ELCRODAT 4-2 kategorisiert?", a: "Kryptomaterial (Kryptoger√§t)", e: "Hardware zur Verschl√ºsselung ist ein Kryptoger√§t (CCI).", o: ["Kryptounterlage", "Kryptomaterial (Kryptoger√§t)", "Zubeh√∂rteil", "Kryptovariable"], m: "KRYPTO" },
    { q: "Welcher Grundsatz gilt f√ºr Sonderkurier und Kurierbegleiter beim Betreten eines Flugzeugs?", a: "Als letzter einsteigen und als erster aussteigen.", e: "Vermeidung von Gedr√§nge und Trennung.", o: ["Zuerst einsteigen, um das Gep√§ck zu verstauen.", "Als letzter einsteigen und als erster aussteigen.", "Immer mit den Piloten einsteigen.", "Zusammen mit der Priority-Gruppe einsteigen."], m: "KRYPTO" },
    { q: "Darf das Kuriergep√§ck im Flugzeug von den Kurieren getrennt werden (z. B. im Frachtraum)?", a: "Nein, es muss unter st√§ndiger Aufsicht bleiben.", e: "St√§ndige Aufsicht ist Pflicht.", o: ["Ja, wenn es ein versiegelter Container ist.", "Ja, bei Fl√ºgen √ºber 4 Stunden.", "Nein, es muss unter st√§ndiger Aufsicht bleiben.", "Nur wenn der Kapit√§n es anordnet."], m: "KRYPTO" }
];

/* --- LOGIC --- */
let activeSet = [];
let retryStack = [];
let currentIndex = 0;
let streak = 0;
let isExam = false;
let examAnswers = {};

function shuffle(arr) {
    for(let i=arr.length-1; i>0; i--){
        const j = Math.floor(Math.random()*(i+1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
}

function initTrainer(filter) {
    isExam = false;
    document.getElementById('start-screen').classList.add('hidden');
    document.getElementById('trainer-screen').classList.remove('hidden');
    
    if(filter === 'ALL') activeSet = [...BANK];
    else activeSet = BANK.filter(x => x.m === filter);
    shuffle(activeSet);
    currentIndex = 0;
    streak = 0;
    retryStack = [];
    updateStreak();
    loadCard();
}

function loadCard() {
    // Button immer erst ausblenden
    const nextBtn = document.getElementById('next-btn');
    nextBtn.style.display = 'none';

    if(currentIndex >= activeSet.length) {
        if(retryStack.length > 0) {
            alert(`Runde beendet. ${retryStack.length} Fehler wiederholen!`);
            activeSet = [...retryStack];
            retryStack = [];
            currentIndex = 0;
            shuffle(activeSet);
        } else {
            alert("Training abgeschlossen!");
            location.reload();
            return;
        }
    }
    const item = activeSet[currentIndex];
    document.getElementById('t-mod').innerText = item.m;
    document.getElementById('t-idx').innerText = `${currentIndex+1} / ${activeSet.length}`;
    document.getElementById('t-question').innerText = item.q;
    document.getElementById('t-retry-badge').classList.toggle('hidden', retryStack.includes(item));
    document.getElementById('t-progress').style.width = `${(currentIndex/activeSet.length)*100}%`;
    const c = document.getElementById('t-options');
    c.innerHTML = '';
    document.getElementById('t-expl').style.display = 'none';
    
    let opts = item.o.map(o => ({ txt:o, isCorrect: o===item.a }));
    shuffle(opts);
    
    opts.forEach((o, i) => {
        const btn = document.createElement('div');
        btn.className = 'opt-btn';
        btn.innerHTML = `<div class="opt-key">${i+1}</div> <div>${o.txt}</div>`;
        btn.onclick = () => checkTrainerAnswer(btn, o.isCorrect, item);
        c.appendChild(btn);
    });
}

function checkTrainerAnswer(btn, isCorrect, item) {
    if(btn.parentElement.classList.contains('locked')) return;
    btn.parentElement.classList.add('locked');
    const explBox = document.getElementById('t-expl');
    explBox.style.display = 'block';
    explBox.className = 'expl-box ' + (isCorrect ? 'is-correct' : 'is-wrong');
    document.getElementById('t-expl-title').innerText = isCorrect ? "‚úì Richtig!" : "‚úó Leider falsch.";
    document.getElementById('t-expl-text').innerText = item.e;
    
    // Vibration
    if(navigator.vibrate) {
        if(!isCorrect) navigator.vibrate(200); 
        else navigator.vibrate(50);
    }

    if(isCorrect) {
        btn.classList.add('correct');
        streak++;
    } else {
        btn.classList.add('wrong');
        streak = 0;
        retryStack.push(item);
        Array.from(document.querySelectorAll('.opt-btn')).forEach(b => {
            if(b.innerText.includes(item.a)) b.classList.add('correct');
        });
    }
    updateStreak();
    
    // Button anzeigen & hinscrollen
    const nextBtn = document.getElementById('next-btn');
    nextBtn.style.display = 'block';
    nextBtn.scrollIntoView({behavior: "smooth", block: "center"});
}

function nextCard() {
    const opts = document.getElementById('t-options');
    if(!opts.classList.contains('locked')) return;
    currentIndex++;
    opts.classList.remove('locked');
    loadCard();
}

function updateStreak() {
    document.getElementById('t-streak').innerText = streak;
}

function initExam() {
    isExam = true;
    document.getElementById('start-screen').classList.add('hidden');
    document.getElementById('exam-screen').classList.remove('hidden');
    
    let pool = [...BANK];
    shuffle(pool);
    activeSet = pool.slice(0, 45);
    examAnswers = {};
    const container = document.getElementById('exam-list');
    container.innerHTML = '';
    activeSet.forEach((item, idx) => {
        let opts = [...item.o];
        shuffle(opts);
        const div = document.createElement('div');
        div.className = 'exam-item';
        div.id = `exam-q-${idx}`;
        div.innerHTML = `
            <div class="q-meta">Frage ${idx+1}</div>
            <div class="exam-q">${item.q}</div>
            ${opts.map(o => `
                <label class="exam-opt">
                    <input type="radio" name="q${idx}" value="${o}" onchange="examAnswers[${idx}]='${o}'">
                    <span>${o}</span>
                </label>
            `).join('')}
            <div class="exam-expl">
                <strong>L√∂sung:</strong> ${item.a}<br>
                <div style="margin-top:5px; padding-left:10px; border-left:2px solid var(--accent);">${item.e}</div>
            </div>
        `;
        container.appendChild(div);
    });
}

function submitExam() {
    if(Object.keys(examAnswers).length < activeSet.length) {
        if(!confirm(`Erst ${Object.keys(examAnswers).length} von ${activeSet.length} Fragen beantwortet. Abgeben?`)) return;
    }
    let score = 0;
    activeSet.forEach((item, idx) => {
        const userAns = examAnswers[idx];
        const div = document.getElementById(`exam-q-${idx}`);
        div.querySelectorAll('input').forEach(inp => inp.disabled = true);
        if(userAns === item.a) {
            score++;
            div.classList.add('graded-correct');
        } else {
            div.classList.add('graded-wrong');
        }
    });
    const perc = Math.round((score/activeSet.length)*100);
    const header = document.getElementById('exam-result-header');
    header.innerHTML = `
        <div class="exam-score-box">
            <div style="font-size:3rem; font-weight:800; color:${perc>=65?'var(--success)':'var(--error)'}">${perc}%</div>
            <div style="font-size:1.2rem; margin-bottom:10px;">${score} / ${activeSet.length} Punkte</div>
            <div style="font-weight:bold; color:var(--muted)">${perc>=65?'Bestanden':'Nicht bestanden'}</div>
        </div>
    `;
    header.classList.remove('hidden');
    document.getElementById('btn-submit-exam').style.display = 'none';
    window.scrollTo(0,0);
}

document.addEventListener('keydown', (e) => {
    if(isExam || document.getElementById('trainer-screen').classList.contains('hidden')) return;
    if(['1','2','3','4'].includes(e.key)) {
        const idx = parseInt(e.key)-1;
        const btns = document.querySelectorAll('.opt-btn');
        if(btns[idx]) btns[idx].click();
    }
    if(e.code === 'Space') {
        e.preventDefault();
        nextCard();
    }
});

const modules = [...new Set(BANK.map(x=>x.m))];
const modContainer = document.getElementById('module-list');
modules.forEach(m => {
    const btn = document.createElement('div');
    btn.className = 'mode-card';
    btn.style.padding = '10px 15px';
    btn.style.marginBottom = '0';
    btn.innerHTML = `<span style="font-weight:bold; font-size:0.9rem;">${m}</span>`;
    btn.onclick = () => initTrainer(m);
    modContainer.appendChild(btn);
});
</script>
</body>
</html>



